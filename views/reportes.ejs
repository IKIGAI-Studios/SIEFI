<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/imgs/imss-logo.png">
    <title>Generar reportes</title>

    <%- include('templates/header')%>

    <%- include('templates/banner')%>
    
    <div class="container mt-1">

      <div class="row space-around">
        <div class="col-lg-4">
            <div class="row justify-content-start align-items-center">
                <div class="col-2">
                    <img src="/icons/pfp.png" alt="">
                </div>
                <div class="col-10">
                    <div class="row"><span class="nombre-usuario" id=""><%= session.user ? session.user.nombre : "Nombre" %></span></div>
                    <div class="row"><span class="nombre-usuario" id=""><%= session.user ? session.user.apellidos : "Apellidos" %></span></div>
                    <div class="row"><p class="tipo-usuario"><%= session.user ? session.user.tipo_usuario : "Ejecutor" %></p></div>
                </div>
                <a href="/logout" class="logout text-danger">CERRAR SESIÃ“N</a>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="d-flex justify-content-center">
                <div class="col-2"><img src="/icons/hint.png" alt="hint"></div>
                <div class="col-10"><p class="texto-hint mt-2">Generar Citatorios y mandamientos</p></div>
            </div>
        </div>
      </div>

      <div class="d-flex"> 
        <div class="col-2 sidebar">
            <ul>
              <li class="active">
                <h5>PATRONES</h5>
                <ul class="">
                    <li><a href="/verPatrones" class="sidebar-item ">VER PATRONES</a></li>
                </ul>
              </li>
              <li class="active mt-3">
                <h5>REPORTES</h5>
                <ul class="">
                    <li><a href="/reportes" class="sidebar-item activo">GENERAR REPORTES</a></li>
                </ul>
              </li>
            </ul>
        </div>
        <div class="col-10 space-around">
          <div id="perfil" class="contenido activo text-center">
            <h2 class="texto-green text-center mt-2">Archivos</h2>

            <div class="">
              <div class="mt-3">
                <div class="container">
                  <h4 for="citatorio">Citatorios</h4>
                  <button type="button" class="btn btn-primary mt-1" value="citatorio" onclick="generarReportes(this.value, '<%= session.user.clave_eje %>' )"> 
                    Generar citatorio
                  </button>                                
                </div>
              </div>
              <div class="mt-3">
                <div class="container">
                  <h4 for="mendamiento">Mandamiento</h4>
                  <button type="button" class="btn btn-success mt-1" value="mandamiento" onclick="generarReportes(this.value, '<%= session.user.clave_eje %>')">
                    Generar mandamiento
                  </button>
                </div>
              </div>
              <div class="mt-3">
                <div class="container">
                  <h4 for="informe">Informe diario</h4>
                  <button type="button" class="btn btn-light mt-1" value="informe" onclick="generarReportes(this.value, '<%= session.user.clave_eje %>')">
                    Generar informe diario
                  </button>
                </div>
              </div>
              <div class="mt-3">
                <div class="container">
                  <h4 for="gastos">Gastos de ejecutor</h4>
                  <button type="button" class="btn btn-warning mt-1" value="gastos" onclick="generarReportes(this.value, '<%= session.user.clave_eje %>')">
                    Generar gastos de ejecutor
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>  
      </div>
    </div>


    <!-- ? MODAL OBTENER LOS REPORTES -->
    <form action="" method="post" id="reportesForm">
      <div class="modal fade" id="generarReportesModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Reportes</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="btnCerrar"></button>
            </div>
            <div class="modal-body">
              <div id="div-generar-reportes"></div>
              
            </div>
            <div class="modal-footer">
              <button class="btn btn-success"  id="btnGenerar">Generar</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnCerrar">Cerrar</button>
            </div>
          </div>
        </div>
      </div>
    </form>

    
       <!-- ? MODAL PARA OBTENER DATOS DE LOS REGISTROS (INFORME Y GASTOS) -->
       <div class="modal fade" id="formsReportesModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Reportes</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="btnCerrar"></button>
            </div>
            <div class="modal-body">
              <div id="div-formularios-reportes"></div>
              
            </div>
            <div class="modal-footer">
              <button class="btn btn-success"  id="btnGenerarForms">Aceptar</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnCerrar">Cerrar</button>
            </div>
          </div>
        </div>
      </div>


     <!--  MODAL PARA INGRESAR EL REGISTRO PATRONAL -->
      <div class="modal fade" id="generarReportesRPModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Reportes</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="btnCerrar"></button>
            </div>
            <div class="modal-body">
              <div id="div-ingresar-registro-patronal"></div>
              
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnCerrar">Cerrar</button>
            </div>
          </div>
        </div>
      </div>

  </body>
  <%- include('templates/footer-pleca')%>
  <script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
  <script src="socket.io/socket.io.min.js"></script>
  <script src="/js/reportes.js"></script>
  </html>